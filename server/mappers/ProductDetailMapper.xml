<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ProductDetailMapper">
	<select id="selectList">
		SELECT detail_id, size, color, use_amount, reg_date FROM product_detail
		WHERE product_id=#{product_id}
	</select>

	<select id="selectColor">
		SELECT color FROM product_detail
		WHERE product_id=#{product_id}
		GROUP BY color
	</select>

	<insert id="insertItem">
		INSERT INTO product_detail (product_id, size, color, use_amount, reg_date) VALUES (#{product_id}, #{size}, #{color}, #{use_amount}, #{reg_date})
	</insert>

	<delete id="deleteItem">
		DELETE FROM product_detail WHERE product_id=#{id}
		<if test="color != null and color != ''">
				AND color=#{color}
		</if>
	</delete>

	<update id="updateItem">
		UPDATE product_detail SET size=#{size}, color=#{color}, use_amount=#{use_amount} WHERE detail_id=#{id}
	</update>

</mapper>